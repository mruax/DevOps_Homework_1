# Домашнее задание №1 по дисциплине системное программное обеспечение (DevOps)

## Условие

Необходимо найти какое-то приложение (к примеру на github) и запустить его с помощью Docker.

## Решение

1. Найдем какое-нибудь простое приложение на гите, к примеру официальный репозиторий фреймворка Flask для создания веб-приложений на Python. В репозитории есть папка examples с простыми примерами веб-серверов для запуска и проверки. Создадим проект и клонируем в него репозиторий.

```bash
git clone https://github.com/pallets/flask
```

2. После того как мы клонируем этот репозиторий, добавим Dockerfile для упаковки приложения.

В проекте есть папка examples/tutorial, где хранится проект с минимальным сервером на flask и базой данных sqlite - перейдем в нужную директорию.

```bash
cd flask/examples/tutorial
```

Создадим Dockerfile со следующим содержанием.

```Dockerfile
# Используем базовый образ Python
FROM python:3.9-slim
LABEL authors="mruax"

# Устанавливаем рабочую директорию
WORKDIR /app

# Копируем файл requirements.txt и устанавливаем зависимости
COPY requirements.txt requirements.txt
RUN pip install -r requirements.txt

# Копируем приложение в рабочую директорию
COPY . .

# Устанавливаем переменные окружения для Flask
ENV FLASK_APP=flaskr
ENV FLASK_ENV=development

# Инициализация базы данных
RUN flask --app flaskr init-db

# Запуск сервера
CMD ["flask", "--app", "flaskr", "run", "--host=0.0.0.0"]

# Открываем порт
EXPOSE 5000

```

Также установим зависимости для сборки в файл requirements.txt.

```txt
build==1.2.1
packaging==24.1
pyproject-hooks==1.1.0
click>=8.0.1
Flask>=2.0.1
itsdangerous>=2.0.1
Jinja2>=3.0.1
MarkupSafe>=2.0.1
Werkzeug>=2.0.1
```

3. Создаем контейнер.

```bash
docker build -t flask-app .
```

4. Запускаем контейнер.

Можно в detached режиме, можно без (флаг -d).

```bash
docker run -d -p 5000:5000 flask-app
```

5. Проверим, что все запускается

Перейдем по ссылке - http://localhost:5000

![Пример 1](src/img.png)

Можно зарегистрироваться и войти в аккаунт. Также можно создавать посты с заголовками и описанием.

![Пример 2](src/img2.png)


## О работе

Здесь дополнительно можно реализовать docker compose с двумя контейнерами под сервер и бд или проделать аналогичную работу на k8s.

Автор: Черняков М. Фт-320008